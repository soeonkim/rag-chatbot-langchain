# RAG ê¸°ë°˜ ë¬¸ì„œ ê²€ìƒ‰ ì±—ë´‡

PDF ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§ˆë¬¸ì— ë‹µë³€í•˜ëŠ” AI ì±—ë´‡

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

LangChainê³¼ Chromaë¥¼ í™œìš©í•œ RAG(Retrieval-Augmented Generation) ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ PDF ë¬¸ì„œë¥¼ ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³ , ì§ˆë¬¸ ì‹œ ê´€ë ¨ ë¬¸ì„œë¥¼ ê²€ìƒ‰í•˜ì—¬ ì •í™•í•œ ë‹µë³€ì„ ìƒì„±í•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥
- ğŸ“„ PDF ë¬¸ì„œ ìë™ ë¡œë“œ ë° ë²¡í„°í™”
- ğŸ” ì˜ë¯¸ ê¸°ë°˜ ë¬¸ì„œ ê²€ìƒ‰
- ğŸ’¬ ì¶œì²˜ ì •ë³´ê°€ í¬í•¨ëœ ë‹µë³€ ìƒì„±
- ğŸ”„ ì‹¤ì‹œê°„ Knowledge Base ë™ê¸°í™”

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. í™˜ê²½ ì„¤ì •
```bash
# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
echo "GOOGLE_API_KEY=your_Google_AI_API_key" > .env
```

### 2. PDF ë¬¸ì„œ ì¶”ê°€
```bash
# PDF íŒŒì¼ì„ data í´ë”ì— ì¶”ê°€
cp your_document.pdf data/
```

### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
```bash
python app.py
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:7860` ì ‘ì†

### 4. ì‚¬ìš© ë°©ë²•
1. **Knowledge Base Sync** ë²„íŠ¼ í´ë¦­ â†’ PDF ë¬¸ì„œ ë™ê¸°í™”
2. **RAG ëª¨ë“œ ì‚¬ìš©** ì²´í¬ë°•ìŠ¤ í™œì„±í™”
3. ë¬¸ì„œ ë‚´ìš©ì— ëŒ€í•´ ì§ˆë¬¸

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ì‚¬ìš©ì    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ì§ˆë¬¸
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Gradio UI                   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RAG Pipeline (LangChain)       â”‚
â”‚                                  â”‚
â”‚  Query â†’ Embedding               â”‚
â”‚         â†“                        â”‚
â”‚  Vector Search (Chroma)          â”‚
â”‚         â†“                        â”‚
â”‚  Context Formatting              â”‚
â”‚         â†“                        â”‚
â”‚  LLM Generation (Gemini)         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
    ì¶œì²˜ í¬í•¨ ë‹µë³€
```

### ë°ì´í„° ì²˜ë¦¬ íë¦„

**Knowledge Base ë™ê¸°í™”:**
```
PDF â†’ PyPDFLoader â†’ í…ìŠ¤íŠ¸ ì¶”ì¶œ
    â†’ RecursiveTextSplitter â†’ ì²­í¬ ë¶„í•  (1000ì)
    â†’ HuggingFace Embeddings â†’ ë²¡í„° ë³€í™˜
    â†’ Chroma DB â†’ ì €ì¥
```

**ì§ˆë¬¸ ë‹µë³€:**
```
ì§ˆë¬¸ â†’ Embedding â†’ Vector Search (Top-5)
    â†’ Context í¬ë§·íŒ… â†’ Gemini LLM â†’ ì¶œì²˜ í¬í•¨ ë‹µë³€
```

## ğŸ’¡ ê¸°ìˆ ì  ë„ì „ ê³¼ì œì™€ í•´ê²°

### 1. ì„ë² ë”© ëª¨ë¸ ë¡œë”© ì„±ëŠ¥ ìµœì í™”

**ë¬¸ì œ:**
- ì„ë² ë”© ëª¨ë¸ ë¡œë”© ì‹œê°„ 20~30ì´ˆ ì†Œìš”
- ë§¤ë²ˆ ê²€ìƒ‰ ì‹œ ëª¨ë¸ì„ ë¡œë“œí•˜ë©´ ì‚¬ìš©ì ê²½í—˜ ì €í•˜

**í•´ê²°:**
```python
# Lazy Loading + ìºì‹± íŒ¨í„´
_embeddings_cache = None

def get_embeddings():
    global _embeddings_cache
    if _embeddings_cache is not None:
        return _embeddings_cache

    _embeddings_cache = HuggingFaceEmbeddings(...)
    return _embeddings_cache
```

**ê²°ê³¼:**
- ì²« ê²€ìƒ‰: 30ì´ˆ â†’ ì´í›„ ê²€ìƒ‰: ì¦‰ì‹œ ì‘ë‹µ
- KB ë¯¸ì‚¬ìš© ì‹œ ë¶ˆí•„ìš”í•œ ì´ˆê¸°í™” ë°©ì§€

### 2. ë²¡í„°DB ì¤‘ë³µ ë°ì´í„° ë°©ì§€

**ë¬¸ì œ:**
- Knowledge Base ë™ê¸°í™” ì‹œ ê¸°ì¡´ ë°ì´í„°ì— ê³„ì† ì¶”ê°€ë¨
- ê°™ì€ ë¬¸ì„œ ë°˜ë³µ ë™ê¸°í™” ì‹œ ì¤‘ë³µ ì €ì¥

**í•´ê²°:**
```python
# ê¸°ì¡´ ë°ì´í„° ì‚­ì œ í›„ ì €ì¥
existing_ids = vector_store.get()["ids"]
if existing_ids:
    vector_store.delete(ids=existing_ids)
vector_store.add_documents(documents=chunks)
```

**ê²°ê³¼:**
- ì¤‘ë³µ ë°ì´í„° ì™„ì „ ì œê±°
- í•­ìƒ ìµœì‹  ìƒíƒœ ìœ ì§€

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **LangChain**: RAG íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
- **Chroma**: ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤
- **Google Gemini 2.5 Flash**: ë‹µë³€ ìƒì„± LLM
- **HuggingFace multilingual-e5-large**: ë‹¤êµ­ì–´ ì„ë² ë”© ëª¨ë¸
- **Gradio**: ì›¹ UI
- **PyPDF**: PDF ë¬¸ì„œ ì²˜ë¦¬

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
06_rag_assignment/
â”œâ”€â”€ app.py                 # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ requirements.txt       # íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
â”œâ”€â”€ .env                   # í™˜ê²½ ë³€ìˆ˜ (API í‚¤)
â”œâ”€â”€ .gitignore            # Git ë¬´ì‹œ íŒŒì¼
â”œâ”€â”€ README.md             # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”œâ”€â”€ data/                 # PDF ë¬¸ì„œ í´ë”
â”‚   â””â”€â”€ .gitkeep
â””â”€â”€ chroma_langchain_db/  # ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ (ìë™ ìƒì„±)
```